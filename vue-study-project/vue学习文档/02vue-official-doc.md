
### 组件

#### prop

- **单向数据流**
  - 父子 prop 形成单向下行绑定，即父级 prop 更新会向下流到子组件中，反之不会（防止子组件改变父级组件的值）
  - 试图改变 prop 情况
    - 使用 prop 传递初始值，并将这初始值作为本地 prop 使用，需要将该值传给其自定义的 data 属性保存（不直接使用，因为对于对象类型的 prop，通过引用传值，会改变父组件的值，下同）
    - 传入 prop 并需要转换该值，最好定义一个 computed 属性来使用这个 prop
    - 子组件使用父级数据，需要在 props 中注明该数据才能使用
  - props 中的数据可表明数据类型，便于检查
  - prop 可提供一个带有需求的对象：比如类型 type，是否必填 required，带有默认数据 default（若为对象，应该用函数返回数据，类似组件的 data），自定义验证函数，这些会在组件实例创建之前验证，所以实例其他属性在这些属性中不可使用
  - 外部提供给组件的值会替换掉组件内部的值，但 class 和 style 除外
- **自定义事件**
  - 事件名推荐使用 kebab-case，因为在 dom 模板中会自动转为全小写
  - 明确定义输入控件类型，应该在组件注册时，在 model 选项中注明 prop 类型和事件类型，并在 props 中注明 prop 类型
  - 使用`.native`修饰符监听原生事件，但组件的根元素必须要能够发生这个事件才行，否则需要使用\$listeners 对象，并在模板字符串内部使用。
  - 在父组件中使用`.sync`进行数据的双向绑定，这时在子组件中修改，父元素相应值也能发生更新
- **插槽 slot**
  - 插槽不能访问父级组件内容
  - 默认插槽：在 slot 元素内部使用默认值
  - 具名插槽：缩写使用`#`号，在模板元素`<template></template>`中使用 v-slot 指令，并指定参数为插槽名，默认如：`v-slot:default`
  - 为了让组件内容在插槽中使用，可以在组件中使用`v-bind`绑定该属性
  - 仅有只含一个默认插槽时，才能用组件当插槽模板，否则应使用`<template></template>`
- **动态组件**
  - 使用`<keep-alive>`将动态组件包裹，能够使内部组件实例在第一次创建时缓存
- **异步组件**
  - 使用函数定义组件

    ```javascript
    Vue.component("async-example", function(resolve, reject) {
      setTimeout(function() {
        resolve({
          template: "<div>I am async!</div>"
        });
      }, 1000);
    });
    ```

- **处理边界情况**
  - 在小型/少量组件中子组件访问根实例，使用`this.$root`访问，但绝大多数情况使用`Vuex`管理
  - 访问父组件使用`this.$parent`
  - 访问子组件，应在子组件中定义`ref`属性，并通过`this.refs.name`来访问
  - 依赖注入，访问祖先元素，在祖先组件中使用 provide 选项（使用函数返回），然后在后代组件中使用 inject 选项接收需要使用的内容，但依赖注入会让组件之间耦合，使重构困难，使用`Vuex`
  - 调用自身的递归：使用 name 选项声明递归的组件名
