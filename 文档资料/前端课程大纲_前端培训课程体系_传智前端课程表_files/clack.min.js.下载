window.clack=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=t.MutationSummary=t.TreeMirrorClient=t.TreeMirror=t.Player=t.Recorder=t.Movie=t.Frame=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(9),u=n(l),h=r(17),c=n(h),f=r(18),d=n(f),p=r(12),v=n(p),g=r(13),y=n(g),m=r(16),b=n(m);t.Frame=o.default,t.Movie=s.default,t.Recorder=u.default,t.Player=c.default,t.TreeMirror=d.default,t.TreeMirrorClient=v.default,t.MutationSummary=y.default,t.Browser=b.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.eventType=t.eventType||"",this.changed=t.changed||[],this.options=t.options||{},this.scrollX=t.scrollX||0,this.scrollY=t.scrollY||0,this.cursorX=t.cursorX||0,this.cursorY=t.cursorY||0,this.height=t.height||0,this.width=t.width||0,this.ts=t.ts||0,this.elementScrollY=t.elementScrollY||0,this.elementScrollX=t.elementScrollX||0,this.element=t.element||"",this.elementTextValue=t.elementTextValue||""}return n(e,[{key:"toJSON",value:function(){return{eventType:this.eventType,options:this.options,scrollX:this.scrollX,scrollY:this.scrollY,cursorX:this.cursorX,cursorY:this.cursorY,height:this.height,width:this.width,changed:this.changed,ts:this.ts,elementScrollY:this.elementScrollY,elementScrollX:this.elementScrollX,element:this.element,elementTextValue:this.elementTextValue}}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(1),l=n(s),u=(r(3),r(8)),h=(n(u),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.id="",this.rootId=t.rootId||0,this.children=t.children||[],this.base=t.base||"",this.top=t.top||0,this.left=t.left||0,this.scrollX=t.scrollX||0,this.scrollY=t.scrollY||0,this.duration=0,this.frames=[];for(var r=t.frames||[],n=0;n<r.length;n++)this.addFrame(new l.default(r[n]));this._resetDuration()}return a(e,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getRootId",value:function(){return this.rootId}},{key:"getChildren",value:function(){return this.children}},{key:"_resetDuration",value:function(){this.frames&&this.frames.length>0&&(this.duration=this.frames[this.frames.length-1].ts-this.frames[0].ts)}},{key:"addFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0;if(e instanceof l.default)t=e;else if(null!==e&&"object"===("undefined"==typeof e?"undefined":o(e))){t=new l.default(e);var r=new Date;t.ts=r.getTime()}return t&&this.frames.push(t),this._resetDuration(),t}},{key:"getFrames",value:function(){return this.frames}},{key:"addFrames",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(function(t){e.addFrame(t)}),this._resetDuration()}},{key:"setFrames",value:function(e){var t=[].concat(e||[]);this.frames=[];for(var r=0;r<t.length;r++)this.addFrame(t[r]);return this._resetDuration(),this}},{key:"toJSON",value:function(){return{top:this.top,left:this.left,scrollX:this.scrollX,scrollY:this.scrollY,frames:this.frames,base:this.base,children:this.children,rootId:this.rootId}}}]),e}());t.default=h},function(e,t,r){!function(t){"use strict";var n,i=t.Base64,o="2.1.9";if("undefined"!=typeof e&&e.exports)try{n=r(4).Buffer}catch(e){}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(a),l=String.fromCharCode,u=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},h=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return e.replace(h,u)},f=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),n=[a.charAt(r>>>18),a.charAt(r>>>12&63),t>=2?"=":a.charAt(r>>>6&63),t>=1?"=":a.charAt(63&r)];return n.join("")},d=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},p=n?function(e){return(e.constructor===n.constructor?e:new n(e)).toString("base64")}:function(e){return d(c(e))},v=function(e,t){return t?p(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):p(String(e))},g=function(e){return v(e,!0)},y=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return l((r>>>10)+55296)+l((1023&r)+56320);case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(y,m)},w=function(e){var t=e.length,r=t%4,n=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[l(n>>>16),l(n>>>8&255),l(255&n)];return i.length-=[0,0,2,1][r],i.join("")},E=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,w)},T=n?function(e){return(e.constructor===n.constructor?e:new n(e,"base64")).toString()}:function(e){return b(E(e))},_=function(e){return T(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},C=function(){var e=t.Base64;return t.Base64=i,e};if(t.Base64={VERSION:o,atob:E,btoa:d,fromBase64:_,toBase64:v,utob:c,encode:v,encodeURI:g,btou:b,decode:_,noConflict:C},"function"==typeof Object.defineProperty){var N=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",N(function(){return _(this)})),Object.defineProperty(String.prototype,"toBase64",N(function(e){return v(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",N(function(){return v(this,!0)}))}}t.Meteor&&(Base64=t.Base64)}(this)},function(e,t,r){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?c(e,t,r):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return l(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function h(e,t){if(l(t),e=o(e,t<0?0:0|v(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=o(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function f(e,t){var r=t.length<0?0:0|v(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=f(e,t),e}function p(e,t){if(a.isBuffer(t)){var r=0|v(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Q(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&$(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),a.alloc(+e)}function y(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}var u;if(i){var h=-1;for(u=r;u<s;u++)if(o(e,u)===o(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===l)return h*a}else h!==-1&&(u-=u-h),h=-1}else for(r+l>s&&(r=s-l),u=r;u>=0;u--){for(var c=!0,f=0;f<l;f++)if(o(e,u+f)!==o(t,f)){c=!1;break}if(c)return u}return-1}function T(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function _(e,t,r,n){return J(q(t,e.length-r),e,r,n)}function C(e,t,r,n){return J(H(t),e,r,n)}function N(e,t,r,n){return C(e,t,r,n)}function k(e,t,r,n){return J(W(t),e,r,n)}function A(e,t,r,n){return J(G(t,e.length-r),e,r,n)}function P(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var l,u,h,c;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(c=(31&o)<<6|63&l,c>127&&(a=c));break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(c=(15&o)<<12|(63&l)<<6|63&u,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:l=e[i+1],u=e[i+2],h=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&h)&&(c=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&h,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return O(n)}function O(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=F(e[o]);return i}function R(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Y(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function X(e,t,r,n,i){return i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function z(e,t,r,n,i){return i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function j(e){if(e=V(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function G(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function W(e){return Z.toByteArray(j(e))}function J(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Q(e){return e!==e}var Z=r(5),K=r(6),$=r(7);t.Buffer=a,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return s(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return u(null,e,t,r)},a.allocUnsafe=function(e){return h(null,e)},a.allocUnsafeSlow=function(e){return h(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,l=Math.min(o,s),u=this.slice(n,i),h=e.slice(t,r),c=0;c<l;++c)if(u[c]!==h[c]){o=u[c],s=h[c];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},a.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return T(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return N(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=a.prototype;else{var i=t-e;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},a.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),K.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),K.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),K.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),K.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;L(this,e,t,r,i,0)}var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;L(this,e,t,r,i,0)}var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Y(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Y(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Y(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Y(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return X(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return X(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:q(new a(e,n).toString()),l=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function i(e){var t,n,i,o,a,s,l=e.length;a=r(e),s=new h(3*l/4-a),i=a>0?l-4:l;var c=0;for(t=0,n=0;t<i;t+=4,n+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===a?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===a&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function a(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(n));return i.join("")}function s(e){for(var t,r=e.length,n=r%3,i="",o=[],s=16383,u=0,h=r-n;u<h;u+=s)o.push(a(e,u,u+s>h?h:u+s));return 1===n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=n,t.toByteArray=i,t.fromByteArray=s;for(var l=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=c.length;f<d;++f)l[f]=c[f],u[c.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,h=-7,c=r?i-1:0,f=r?-1:1,d=e[t+c];for(c+=f,o=d&(1<<-h)-1,d>>=-h,h+=s;h>0;o=256*o+e[t+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+e[t+c],c+=f,h-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,h=(1<<u)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+c>=1?f/l:f*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(t*l-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+d]=255&a,d+=p,a/=256,u-=8);e[r+d-p]|=128*v}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){!function(){function t(e){for(var t="",r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}function r(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,e&&e instanceof r?this.value=e.toString():e&&"[object String]"===Object.prototype.toString.call(e)&&r.isGuid(e)&&(this.value=e),this.equals=function(e){return r.isGuid(e)&&this.value==e},this.isEmpty=function(){return this.value===r.EMPTY},this.toString=function(){return this.value},this.toJSON=function(){return this.value}}var n=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i");r.EMPTY="00000000-0000-0000-0000-000000000000",r.isGuid=function(e){return e&&(e instanceof r||n.test(e.toString()))},r.create=function(){return new r([t(2),t(1),t(1),t(1),t(3)].join("-"))},r.raw=function(){return[t(2),t(1),t(1),t(1),t(3)].join("-")},"undefined"!=typeof e&&e.exports?e.exports=r:"undefined"!=typeof window&&(window.Guid=r)}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){return new Promise(function(o,a){i=i||{};var s=new XMLHttpRequest;s.open(e,t,!i.hasOwnProperty("async")||i.async),s.withCredentials=!0,r=r||{},Object.keys(r).forEach(function(e){return s.setRequestHeader(e,r[e])}),s.onload=function(){200===s.status?o(s.responseText):a(new Error(s.statusText))},s.onerror=function(){a(new Error(s.statusText))},s.send(n)})}function l(e){return btoa((0,y.default)(encodeURIComponent(e)))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=r(10),c=n(h),f=r(2),d=n(f),p=(r(3),r(12)),v=n(p),g=r(14),y=n(g),m=r(15),b=n(m),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.isValidateBrowser=b.default.isValidateBrowser(),!r.isValidateBrowser)return o(r);r.session=e.session,r.wid=e.wid,r.api=e.api,r.remoteMovieUrl=e.remoteMovieUrl,r.remoteFrameUrl=e.remoteFrameUrl,r.base=e.base,r.url=e.url,r.pageScrollHeight=e.pageScrollHeight,r.lastMousePos={x:0,y:0},r.lastScrollPos={top:0,left:0},r.setTarget(document.documentElement),r.refreshEvent={name:"cimiceRefresh",event:new Event("cimiceRefresh"),handler:function(e){},t:null,interval:3e3},r.sessionEvent={name:"clacksession",handler:function(e){},t:null},r.events=["mousemove","click","scroll","resize","keyup","change"],r.eventHandlers=[],r.movie=null,r.isRecording=!1,r.postRetryTime=10,r.currentPostRetryTime=r.postRetryTime,r.postIntervalId=null,r.isPosting=!1,r.target.addEventListener(r.refreshEvent.name,r.refreshEvent.handler,!1);var n=(r.initMovie().getId(),function(e,t,r){t.addFrame(r.frame)}),a=r;return r.treeMirrorClient=new v.default(document,{initialize:function(e,t){if(!r.wid)return console.error("none wid");s("POST",r.api+"/website/"+r.wid+"/session").then(function(n){r.target.dispatchEvent(new CustomEvent("clacksession",{detail:n})),setTimeout(function(){s("POST",r.api+"/movie",{"content-type":"application/json"},JSON.stringify({rootId:e,children:JSON.stringify(t),base:a.base,url:a.url,pageScrollHeight:a.pageScrollHeight,time:Date.now(),session:r.session})).then(function(e){var t=JSON.parse(e);t&&t.movie&&a.movie.setId(t.movie)}).catch(function(e){return console.error(e)})},2e3)}).catch(function(e){return console.error(e)});var n=100,i=0;r.postIntervalId=setInterval(function(){var e=r.getMovie(),t=e.getFrames();if(r.currentPostRetryTime<1)return void clearInterval(r.postIntervalId);if(!a.movie.getId())return i++,void(i>10&&e.setFrames([]));if(r.isRecording&&!r.isPosting&&t.length>n&&a.movie.getId()){i=0,r.isPosting=!0;var o=t.slice(0,n),u=JSON.stringify(o);s("POST",r.api+"/frameStream",{},l(JSON.stringify({frames:u,movie:a.movie.getId(),time:t[t.length-1].ts}))).then(function(){r.currentPostRetryTime=r.postRetryTime,t.splice(0,n),e.setFrames(t),r.isPosting=!1}).catch(function(){r.currentPostRetryTime--,r.isPosting=!1})}},1e3)},applyChanged:function(e,t,r,i,o){var s={eventType:"mutation",ts:o,changed:[e,t,r,i]};a.onEventCallback(n,{type:"mutation",frame:s})}}),r.listeners=e.listeners||{},r.target instanceof window.HTMLHtmlElement&&(r.listeners={scroll:window,resize:window}),r.on("startRecording",function(){r.isRecording=!0,r.refreshEvent.t=setInterval(function(){r.target.dispatchEvent(r.refreshEvent.event)},r.refreshEvent.interval)}),r.on("stopRecording",function(){r.isRecording=!1}),window.addEventListener("beforeunload",function(){var e=a.getMovie(),t=e.getFrames(),r=(new XMLHttpRequest,JSON.stringify(t));s("POST",a.api+"/frameStream",{},l(JSON.stringify({frames:r,movie:a.movie.getId(),time:t[t.length-1].ts}))).then(function(){}).catch(),e.setFrames([])},!0),r}return a(t,e),u(t,[{key:"getMovie",value:function(){return this.movie}},{key:"getEvents",value:function(){return this.events}},{key:"setEvents",value:function(e){var t=[].concat(e||[]);this.events=[];for(var r=0;r<t.length;r++)this.events.push(t[r]);return this}},{key:"getListeners",value:function(){return this.listeners}},{key:"getListener",value:function(e){return this.listeners[e]||this.tryGetTarget()}},{key:"initMovie",value:function(){var e=this.tryGetTarget(),t=new d.default,r=this.getPosTarget();return t.top=r.top,t.left=r.left,t.scrollX=e.scrollLeft,t.scrollY=e.scrollTop,this.movie=t,this.movie}},{key:"getPosTarget",value:function(){var e=this.tryGetTarget().getBoundingClientRect(),t=document.documentElement;return{top:e.top+(window.pageYOffset||t.scrollTop||0),left:e.left+(window.pageXOffset||t.scrollLeft||0)}}},{key:"startRecording",value:function(){var e=this;if(!this.isValidateBrowser)return void console.log("unsupported browser");this.emit("startRecording");for(var t=function(t){var r=e.events[t],n=e.onEvents[r];n||(n=e.abstractEventCallback),"keyup"==r&&(n=e.keyupEventCallback),"cimiceRefresh"==r&&(n=e.cimiceRefreshEventCallback),"mousemove"==r&&(n=e.mousemoveEventCallback),"click"==r&&(n=e.clickEventCallback),"scroll"==r&&(n=e.scrollEventCallback),"change"==r&&(n=e.changeEventCallback);var i=function(t){e.onEventCallback(n,t)};e.eventHandlers.splice(t,0,i),"scroll"==r||"keyup"==r?e.getListener(r).addEventListener(r,i,!0):e.getListener(r).addEventListener(r,i)},r=0;r<this.events.length;r++)t(r)}},{key:"stopRecording",value:function(){for(var e=0;e<this.events.length;e++){var t=this.events[e],r=this.eventHandlers[e];r&&this.getListener(t).removeEventListener(t,r)}return this.emit("stopRecording"),this.movie}},{key:"onEventCallback",value:function(e,t){this.emit("recording",t),this.emit(t.type,t),e(this,this.movie,t)}},{key:"abstractEventCallback",value:function(e,t,r){var n=r.target,i=n.body,o=i?i.parentNode.scrollTop||i.scrollTop:n.scrollTop,a=i?i.parentNode.scrollLeft||i.scrollLeft:n.scrollLeft;t.addFrame({scrollY:o,scrollX:a,cursorX:r.pageX||e.lastMousePos.x,cursorY:r.pageY||e.lastMousePos.y,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type})}},{key:"keyupEventCallback",value:function(e,t,r){!r.bubbles||"TEXTAREA"!=r.srcElement.tagName&&"INPUT"!=r.srcElement.tagName||t.addFrame({scrollY:e.lastScrollPos.top,scrollX:e.lastScrollPos.left,cursorX:r.pageX||e.lastMousePos.x,cursorY:r.pageY||e.lastMousePos.y,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type,element:e.treeMirrorClient.serializeNode(r.srcElement),elementTextValue:r.srcElement.value})}},{key:"cimiceRefreshEventCallback",value:function(e,t,r){var n=r.target,i=n.body,o=i?i.parentNode.scrollTop||i.scrollTop:n.scrollTop,a=i?i.parentNode.scrollLeft||i.scrollLeft:n.scrollLeft;t.addFrame({scrollY:o,scrollX:a,cursorX:r.pageX||e.lastMousePos.x,cursorY:r.pageY||e.lastMousePos.y,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type})}},{key:"mousemoveEventCallback",value:function(e,t,r){var n=r.target,i=n.body,o=i?i.parentNode.scrollTop||i.scrollTop:n.scrollTop,a=i?i.parentNode.scrollLeft||i.scrollLeft:n.scrollLeft;t.addFrame({scrollY:o,scrollX:a,cursorX:r.clientX,cursorY:r.clientY,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type}),e.lastMousePos.x=r.pageX+a,e.lastMousePos.y=r.pageY+o}},{key:"clickEventCallback",value:function(e,t,r){var n=r.target,i=n.body,o=i?i.parentNode.scrollTop||i.scrollTop:n.scrollTop,a=i?i.parentNode.scrollLeft||i.scrollLeft:n.scrollLeft;t.addFrame({scrollY:o,scrollX:a,cursorX:r.pageX,cursorY:r.pageY,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type}),e.lastMousePos.x=r.pageX+a,e.lastMousePos.y=r.pageY+o}},{key:"changeEventCallback",value:function(e,t,r){r.bubbles&&("SELECT"==r.srcElement.tagName?t.addFrame({scrollY:e.lastScrollPos.top,scrollX:e.lastScrollPos.left,cursorX:r.pageX||e.lastMousePos.x,cursorY:r.pageY||e.lastMousePos.y,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type,element:e.treeMirrorClient.serializeNode(r.srcElement),elementTextValue:r.srcElement.selectedIndex}):"INPUT"==r.srcElement.tagName&&"radio"==r.srcElement.type?t.addFrame({
eventType:r.type,element:e.treeMirrorClient.serializeNode(r.srcElement)}):"INPUT"==r.srcElement.tagName&&"checkbox"==r.srcElement.type&&t.addFrame({eventType:r.type,element:e.treeMirrorClient.serializeNode(r.srcElement),elementTextValue:r.srcElement.checked}))}},{key:"scrollEventCallback",value:function(e,t,r){var n=r.target,i=n.body,o=i?i.parentNode.scrollTop||i.scrollTop:n.scrollTop,a=i?i.parentNode.scrollLeft||i.scrollLeft:n.scrollLeft;r.bubbles?(e.lastScrollPos.top=o,e.lastScrollPos.left=a,t.addFrame({scrollY:o,scrollX:a,cursorX:r.pageX||e.lastMousePos.x,cursorY:r.pageY||e.lastMousePos.y,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type})):t.addFrame({scrollY:e.lastScrollPos.top,scrollX:e.lastScrollPos.left,cursorX:e.lastMousePos.x||r.pageX,cursorY:e.lastMousePos.y||r.pageY,width:e.target.clientWidth,height:e.target.clientHeight,eventType:r.type,elementScrollY:r.srcElement.scrollTop,elementScrollX:r.srcElement.scrollLeft,element:e.treeMirrorClient.serializeNode(r.srcElement)})}},{key:"refreshInputsValue",value:function(){var e=document.getElementsByTagName("input");if(e&&e.length)for(var t=0;t<e.length;t++)e[t].value&&e[t].setAttribute("value",e[t].value);var r=document.getElementsByTagName("textarea");if(r&&r.length)for(var n=0;n<r.length;n++)r[n].innerHTML&&r[n].setAttribute("value",r[n].innerHTML)}}]),t}(c.default);t.default=w},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(11),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.onEvents=e.onEvents||r.onEvents(),r.target=null,r}return o(t,e),a(t,[{key:"onEvents",value:function(){return{}}},{key:"setTarget",value:function(e){if(!(e instanceof window.HTMLElement))throw new Error("Target is not an instance of HTMLElement");return this.target=e,this}},{key:"getTarget",value:function(){return this.target}},{key:"tryGetTarget",value:function(){var e=this.getTarget();if(!e)throw new Error("Target not found");return e}}]),t}(s.EventEmitter);t.default=l},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(13),s=n(a),l=function(){function e(t,r,n){var o=this;i(this,e),this.target=t,this.mirror=r,this.nextId=1,this.knownNodes=new s.default.NodeMap;for(var a=this.serializeNode(t).id,l=[],u=t.firstChild;u;u=u.nextSibling)l.push(this.serializeNode(u,!0));this.mirror.initialize(a,l);var h=[{all:!0}];n&&(h=h.concat(n)),this.mutationSummary=new s.default({rootNode:t,callback:function(e,t){o.applyChanged(e,t)},queries:h})}return o(e,[{key:"disconnect",value:function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0)}},{key:"rememberNode",value:function(e){var t=this.nextId++;return this.knownNodes.set(e,t),t}},{key:"forgetNode",value:function(e){this.knownNodes.delete(e)}},{key:"serializeNode",value:function(e,t){if(null===e)return null;var r=this.knownNodes.get(e);if(void 0!==r)return{id:r};var n={nodeType:e.nodeType,id:this.rememberNode(e)};switch(n.nodeType){case Node.DOCUMENT_TYPE_NODE:var i=e;n.name=i.name,n.publicId=i.publicId,n.systemId=i.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:n.textContent=e.textContent;break;case Node.ELEMENT_NODE:var o=e;n.tagName=o.tagName,n.attributes={};for(var a=0;a<o.attributes.length;a++){var s=o.attributes[a];n.attributes[s.name]=s.value}if(t&&o.childNodes.length){n.childNodes=[];for(var l=o.firstChild;l;l=l.nextSibling)n.childNodes.push(this.serializeNode(l,!0))}}return n}},{key:"serializeAddedAndMoved",value:function(e,t,r){var n=this,i=e.concat(t).concat(r),o=new s.default.NodeMap;i.forEach(function(e){var t=e.parentNode,r=o.get(t);r||(r=new s.default.NodeMap,o.set(t,r)),r.set(e,!0)});var a=[];return o.keys().forEach(function(e){for(var t=o.get(e),r=t.keys();r.length;){for(var i=r[0];i.previousSibling&&t.has(i.previousSibling);)i=i.previousSibling;for(;i&&t.has(i);){var s=n.serializeNode(i);s.previousSibling=n.serializeNode(i.previousSibling),s.parentNode=n.serializeNode(i.parentNode),a.push(s),t.delete(i),i=i.nextSibling}r=t.keys()}}),a}},{key:"serializeAttributeChanges",value:function(e){var t=this,r=new s.default.NodeMap;return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var i=r.get(e);i||(i=t.serializeNode(e),i.attributes={},r.set(e,i)),i.attributes[n]=e.getAttribute(n)})}),r.keys().map(function(e){return r.get(e)})}},{key:"applyChanged",value:function(e,t){var r=this,n=e[0],i=n.removed.map(function(e){return r.serializeNode(e)}),o=this.serializeAddedAndMoved(n.added,n.reparented,n.reordered),a=this.serializeAttributeChanges(n.attributeChanged),s=n.characterDataChanged.map(function(e){var t=r.serializeNode(e);return t.textContent=e.textContent,t});this.mirror.applyChanged(i,o,a,s,t),n.removed.forEach(function(e){r.forgetNode(e)})}}]),e}();t.default=l},function(e,t){"use strict";function r(e){return'"'+e.replace(/"/,'\\"')+'"'}function n(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(e=e.trim(),!e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(b))throw Error("Invalid request option. invalid attribute name: "+e);return e}function i(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},r={},i=e.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(a){var a=n(a),s=a.toLowerCase();if(t[s])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");r[a]=!0,t[s]=!0}}return Object.keys(r)}function o(e){var t={};return e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=!0})}),Object.keys(t)}var a,s=function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};if(a="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver,void 0===a)throw console.error("DOM Mutation Observers are required."),console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver"),Error("DOM Mutation Observers are required");var l,u=function(){function e(){this.nodes=[],this.values=[]}return e.prototype.isIndex=function(e){return+e===e>>>0},e.prototype.nodeId=function(t){var r=t[e.ID_PROP];return r||(r=t[e.ID_PROP]=e.nextId_++),r},e.prototype.set=function(e,t){var r=this.nodeId(e);this.nodes[r]=e,this.values[r]=t},e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]},e.prototype.has=function(e){return this.nodeId(e)in this.nodes},e.prototype.delete=function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0},e.prototype.keys=function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},e.ID_PROP="__mutation_summary_node_map_id__",e.nextId_=1,e}();!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(l||(l={}));var h=function(){function e(e,t,r,n,i,o,a,s){void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===s&&(s=null),this.node=e,this.childList=t,this.attributes=r,this.characterData=n,this.oldParentNode=i,this.added=o,this.attributeOldValues=a,this.characterDataOldValue=s,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return e.prototype.getAttributeOldValue=function(e){if(this.attributeOldValues)return this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]},e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e},e.prototype.attributeMutated=function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},e in this.attributeOldValues||(this.attributeOldValues[e]=t)},e.prototype.characterDataMutated=function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)},e.prototype.removedFromParent=function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e},e.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},e}(),c=function(){function e(){this.added=new u,this.removed=new u,this.maybeMoved=new u,this.oldPrevious=new u,this.moved=void 0}return e}(),f=function(e){function t(t,r){e.call(this),this.rootNode=t,this.reachableCache=void 0,this.wasReachableCache=void 0,this.anyParentsChanged=!1,this.anyAttributesChanged=!1,this.anyCharacterDataChanged=!1;for(var n=0;n<r.length;n++){var i=r[n];switch(i.type){case"childList":this.anyParentsChanged=!0;for(var o=0;o<i.removedNodes.length;o++){var a=i.removedNodes[o];this.getChange(a).removedFromParent(i.target)}for(var o=0;o<i.addedNodes.length;o++){var a=i.addedNodes[o];this.getChange(a).insertedIntoParent()}break;case"attributes":this.anyAttributesChanged=!0;var s=this.getChange(i.target);s.attributeMutated(i.attributeName,i.oldValue);break;case"characterData":this.anyCharacterDataChanged=!0;var s=this.getChange(i.target);s.characterDataMutated(i.oldValue)}}}return s(t,e),t.prototype.getChange=function(e){var t=this.get(e);return t||(t=new h(e),this.set(e,t)),t},t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode},t.prototype.getIsReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new u;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t},t.prototype.getWasReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new u;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t},t.prototype.reachabilityChange=function(e){return this.getIsReachable(e)?this.getWasReachable(e)?l.STAYED_IN:l.ENTERED:this.getWasReachable(e)?l.EXITED:l.STAYED_OUT},t}(u),d=function(){function e(e,t,r,n,i){this.rootNode=e,this.mutations=t,this.selectors=r,this.calcReordered=n,this.calcOldPreviousSibling=i,this.treeChanges=new f(e,t),this.entered=[],this.exited=[],this.stayedIn=new u,this.visited=new u,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return e.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},e.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var r=this.treeChanges.get(e),n=t;if((r&&r.childList||void 0==n)&&(n=this.treeChanges.reachabilityChange(e)),n!==l.STAYED_OUT){if(this.matchabilityChange(e),n===l.ENTERED)this.entered.push(e);else if(n===l.EXITED)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(n===l.STAYED_IN){var i=l.STAYED_IN;r&&r.childList&&(r.oldParentNode!==e.parentNode?(i=l.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(i=l.REORDERED)),this.stayedIn.set(e,i)}if(n!==l.STAYED_IN)for(var o=e.firstChild;o;o=o.nextSibling)this.visitNode(o,n)}}},e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var n=this.childListChangeMap.get(t);n||(n=new c,this.childListChangeMap.set(t,n)),n.oldPrevious.has(e)||n.oldPrevious.set(e,e.previousSibling)}},e.prototype.getChanged=function(e,t,r){this.selectors=t,this.characterDataOnly=r;for(var n=0;n<this.entered.length;n++){var i=this.entered[n],o=this.matchabilityChange(i);o!==l.ENTERED&&o!==l.STAYED_IN||e.added.push(i)}for(var a=this.stayedIn.keys(),n=0;n<a.length;n++){var i=a[n],o=this.matchabilityChange(i);if(o===l.ENTERED)e.added.push(i);else if(o===l.EXITED)e.removed.push(i);else if(o===l.STAYED_IN&&(e.reparented||e.reordered)){var s=this.stayedIn.get(i);e.reparented&&s===l.REPARENTED?e.reparented.push(i):e.reordered&&s===l.REORDERED&&e.reordered.push(i)}}for(var n=0;n<this.exited.length;n++){var i=this.exited[n],o=this.matchabilityChange(i);o!==l.EXITED&&o!==l.STAYED_IN||e.removed.push(i)}},e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var r=this.treeChanges.reachabilityChange(e);if(r===l.STAYED_OUT||r===l.ENTERED)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var n=this.childListChangeMap.get(t);if(!n)throw Error("getOldPreviousSibling requested on invalid node.");return n.oldPrevious.get(e)},e.prototype.getOldAttribute=function(e,t){var r=this.treeChanges.get(e);if(!r||!r.attributes)throw Error("getOldAttribute requested on invalid node.");var n=r.getAttributeOldValue(t);if(void 0===n)throw Error("getOldAttribute requested for unchanged attribute name.");return n},e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,r;if(e){t={},r={};for(var n=0;n<e.length;n++){var i=e[n];t[i]=!0,r[i.toLowerCase()]=i}}for(var o={},a=this.treeChanges.keys(),n=0;n<a.length;n++){var s=a[n],u=this.treeChanges.get(s);if(u.attributes&&l.STAYED_IN===this.treeChanges.reachabilityChange(s)&&l.STAYED_IN===this.matchabilityChange(s))for(var h=s,c=u.getAttributeNamesMutated(),f=0;f<c.length;f++){var i=c[f];if(!t||t[i]||u.isCaseInsensitive&&r[i]){var d=u.getAttributeOldValue(i);d!==h.getAttribute(i)&&(r&&u.isCaseInsensitive&&(i=r[i]),o[i]=o[i]||[],o[i].push(h))}}}return o},e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],r=0;r<e.length;r++){var n=e[r];if(l.STAYED_IN===this.treeChanges.reachabilityChange(n)){var i=this.treeChanges.get(n);i.characterData&&n.textContent!=i.characterDataOldValue&&t.push(n)}}return t},e.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new u);var r=this.matchCache[e.uid],n=r.get(t);return void 0===n&&(n=e.matchabilityChange(t,this.treeChanges.get(t)),r.set(t,n)),n},e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return l.STAYED_IN;default:return l.STAYED_OUT}if(!this.selectors)return l.STAYED_IN;if(e.nodeType!==Node.ELEMENT_NODE)return l.STAYED_OUT;for(var r=e,n=this.selectors.map(function(e){return t.computeMatchabilityChange(e,r)}),i=l.STAYED_OUT,o=0;i!==l.STAYED_IN&&o<n.length;){switch(n[o]){case l.STAYED_IN:i=l.STAYED_IN;break;case l.ENTERED:i=i===l.EXITED?l.STAYED_IN:l.ENTERED;break;case l.EXITED:i=i===l.ENTERED?l.STAYED_IN:l.EXITED}o++}return i},e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new c,this.childListChangeMap.set(e,t)),t},e.prototype.processChildlistChanges=function(){if(!this.childListChangeMap){this.childListChangeMap=new u;for(var e=0;e<this.mutations.length;e++){var t=function(e,t){!e||n.oldPrevious.has(e)||n.added.has(e)||n.maybeMoved.has(e)||t&&(n.added.has(t)||n.maybeMoved.has(t))||n.oldPrevious.set(e,t)},r=this.mutations[e];if("childList"==r.type&&(this.treeChanges.reachabilityChange(r.target)===l.STAYED_IN||this.calcOldPreviousSibling)){for(var n=this.getChildlistChange(r.target),i=r.previousSibling,o=0;o<r.removedNodes.length;o++){var a=r.removedNodes[o];t(a,i),n.added.has(a)?n.added.delete(a):(n.removed.set(a,!0),n.maybeMoved.delete(a)),i=a}t(r.nextSibling,i);for(var o=0;o<r.addedNodes.length;o++){var a=r.addedNodes[o];n.removed.has(a)?(n.removed.delete(a),n.maybeMoved.set(a,!0)):n.added.set(a,!0)}}}}},e.prototype.wasReordered=function(e){function t(e){if(!e)return!1;if(!a.maybeMoved.has(e))return!1;var t=a.moved.get(e);return void 0!==t?t:(s.has(e)?t=!0:(s.set(e,!0),t=n(e)!==r(e)),s.has(e)?(s.delete(e),a.moved.set(e,t)):t=a.moved.get(e),t)}function r(e){var n=l.get(e);if(void 0!==n)return n;for(n=a.oldPrevious.get(e);n&&(a.removed.has(n)||t(n));)n=r(n);return void 0===n&&(n=e.previousSibling),l.set(e,n),n}function n(e){if(h.has(e))return h.get(e);for(var r=e.previousSibling;r&&(a.added.has(r)||t(r));)r=r.previousSibling;return h.set(e,r),r}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var i=e.parentNode,o=this.treeChanges.get(e);o&&o.oldParentNode&&(i=o.oldParentNode);var a=this.childListChangeMap.get(i);if(!a)return!1;if(a.moved)return a.moved.get(e);a.moved=new u;var s=new u,l=new u,h=new u;return a.maybeMoved.keys().forEach(t),a.moved.get(e)},e}(),p=function(){function e(e,t){var r=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element||t.characterData?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var n=t.attribute?[t.attribute]:t.attributeList,i=e.attributeChangedNodes(n);t.attribute?this.valueChanged=i[t.attribute]||[]:(this.attributeChanged=i,t.attributeList&&t.attributeList.forEach(function(e){r.attributeChanged.hasOwnProperty(e)||(r.attributeChanged[e]=[])}))}if(t.all||t.characterData){var o=e.getCharacterDataChanged();t.characterData?this.valueChanged=o:this.characterDataChanged=o}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}return e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)},e}(),v=/[a-zA-Z_]+/,g=/[a-zA-Z0-9_\-]+/,y=function(){function e(){}return e.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),r=0;r<t.length;r++)if(this.attrValue===t[r])return!0;return!1},e.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+r(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+r(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},e}(),m=function(){function e(){this.uid=e.nextUid++,this.qualifiers=[]}return Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)},e.prototype.wasMatching=function(e,t,r){if(!t||!t.attributes)return r;var n=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==n&&n!==e.tagName)return!1;for(var i=[],o=!1,a=0;a<this.qualifiers.length;a++){var s=this.qualifiers[a],l=t.getAttributeOldValue(s.attrName);i.push(l),o=o||void 0!==l}if(!o)return r;for(var a=0;a<this.qualifiers.length;a++){var s=this.qualifiers[a],l=i[a];if(void 0===l&&(l=e.getAttribute(s.attrName)),!s.matches(l))return!1}return!0},e.prototype.matchabilityChange=function(e,t){var r=this.isMatching(e);return r?this.wasMatching(e,t,r)?l.STAYED_IN:l.ENTERED:this.wasMatching(e,t,r)?l.EXITED:l.STAYED_OUT},e.parseSelectors=function(t){function r(){i&&(o&&(i.qualifiers.push(o),o=void 0),s.push(i)),i=new e}function n(){o&&i.qualifiers.push(o),o=new y}for(var i,o,a,s=[],l=/\s/,u="Invalid or unsupported selector syntax.",h=1,c=2,f=3,d=4,p=5,m=6,b=7,w=8,E=9,T=10,_=11,C=12,N=13,k=14,A=h,P=0;P<t.length;){var S=t[P++];switch(A){case h:if(S.match(v)){r(),i.tagName=S,A=c;break}if("*"==S){r(),i.tagName="*",A=f;break}if("."==S){r(),n(),i.tagName="*",o.attrName="class",o.contains=!0,A=d;break}if("#"==S){r(),n(),i.tagName="*",o.attrName="id",A=d;break}if("["==S){r(),n(),i.tagName="*",o.attrName="",A=m;break}if(S.match(l))break;throw Error(u);case c:if(S.match(g)){i.tagName+=S;break}if("."==S){n(),o.attrName="class",o.contains=!0,A=d;break}if("#"==S){n(),o.attrName="id",A=d;break}if("["==S){n(),o.attrName="",A=m;break}if(S.match(l)){A=k;break}if(","==S){A=h;break}throw Error(u);case f:if("."==S){n(),o.attrName="class",o.contains=!0,A=d;break}if("#"==S){n(),o.attrName="id",A=d;break}if("["==S){n(),o.attrName="",A=m;break}if(S.match(l)){A=k;break}if(","==S){A=h;break}throw Error(u);case d:if(S.match(v)){o.attrValue=S,A=p;break}throw Error(u);case p:if(S.match(g)){o.attrValue+=S;break}if("."==S){n(),o.attrName="class",o.contains=!0,A=d;break}if("#"==S){n(),o.attrName="id",A=d;break}if("["==S){n(),A=m;break}if(S.match(l)){A=k;break}if(","==S){A=h;break}throw Error(u);case m:if(S.match(v)){o.attrName=S,A=b;break}if(S.match(l))break;throw Error(u);case b:if(S.match(g)){o.attrName+=S;break}if(S.match(l)){A=w;break}if("~"==S){o.contains=!0,A=E;break}if("="==S){o.attrValue="",A=_;break}if("]"==S){A=f;break}throw Error(u);case w:if("~"==S){o.contains=!0,A=E;break}if("="==S){o.attrValue="",A=_;break}if("]"==S){A=f;break}if(S.match(l))break;throw Error(u);case E:if("="==S){o.attrValue="",A=_;break}throw Error(u);case T:if("]"==S){A=f;break}if(S.match(l))break;throw Error(u);case _:if(S.match(l))break;if('"'==S||"'"==S){a=S,A=N;break}o.attrValue+=S,A=C;break;case C:if(S.match(l)){A=T;break}if("]"==S){A=f;break}if("'"==S||'"'==S)throw Error(u);o.attrValue+=S;break;case N:if(S==a){A=T;break}o.attrValue+=S;break;case k:if(S.match(l))break;if(","==S){A=h;break}throw Error(u)}}switch(A){case h:case c:case f:case p:case k:r();break;default:throw Error(u)}if(!s.length)throw Error(u);return s},e.nextUid=1,e.matchesSelector=function(){var e=document.createElement("div");return"function"==typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector"}(),e}(),b=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,w=function(){function e(t){var r=this;this.connected=!1,this.options=e.validateOptions(t),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(t){return e.createQueryValidator(r.root,t)})),this.observer=new a(function(e){r.observerCallback(e)}),this.reconnect()}return e.createObserverOptions=function(e){function t(e){if(!n.attributes||r){if(n.attributes=!0,n.attributeOldValue=!0,!e)return void(r=void 0);r=r||{},e.forEach(function(e){r[e]=!0,r[e.toLowerCase()]=!0})}}var r,n={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return n.characterData=!0,void(n.characterDataOldValue=!0);if(e.all)return t(),n.characterData=!0,void(n.characterDataOldValue=!0);if(e.attribute)return void t([e.attribute.trim()]);var r=o(e.elementFilter).concat(e.attributeList||[]);r.length&&t(r)}),r&&(n.attributeFilter=Object.keys(r)),n},e.validateOptions=function(t){for(var r in t)if(!(r in e.optionKeys))throw Error("Invalid option: "+r);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var o={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]},a=0;a<t.queries.length;a++){var s=t.queries[a];if(s.all){if(Object.keys(s).length>1)throw Error("Invalid request option. all has no options.");o.queries.push({all:!0})}else if("attribute"in s){var l={attribute:n(s.attribute)};if(l.elementFilter=m.parseSelectors("*["+l.attribute+"]"),Object.keys(s).length>1)throw Error("Invalid request option. attribute has no options.");o.queries.push(l)}else if("element"in s){var u=Object.keys(s).length,l={element:s.element,elementFilter:m.parseSelectors(s.element)};if(s.hasOwnProperty("elementAttributes")&&(l.attributeList=i(s.elementAttributes),u--),u>1)throw Error("Invalid request option. element only allows elementAttributes option.");o.queries.push(l)}else{if(!s.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(s).length>1)throw Error("Invalid request option. characterData has no options.");o.queries.push({characterData:!0})}}return o},e.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new d(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),r=[],n=0;n<this.options.queries.length;n++)r.push(new p(t,this.options.queries[n]));return r},e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})},e.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,r){t&&t.validate(e[r])})},e.prototype.changesToReport=function(e){return e.some(function(e){var t=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(t.some(function(t){return e[t]&&e[t].length}))return!0;if(e.attributeChanged){var r=Object.keys(e.attributeChanged),n=r.some(function(t){return!!e.attributeChanged[t].length});if(n)return!0}return!1})},e.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t,Date.now()),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},e.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),
this.connected=!1,e},e.NodeMap=u,e.parseElementFilter=m.parseSelectors,e.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e}();e.exports=w},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=32768,n=0,i=1,o=2,a=6,s=!0,l=32768,u=64,h=8192,c=2*r,f=3,d=258,p=16,v=8192,g=13;v>l&&alert("error: zip_INBUFSIZ is too small"),r<<1>1<<p&&alert("error: zip_WSIZE is too large"),g>p-1&&alert("error: zip_HASH_BITS is too large"),(g<8||258!=d)&&alert("error: Code too clever");var y,m,b,w,E,T,_,C,N,k,A,P,S,O,x,M,I,R,D,L,Y,B,U,X,z,j,V,F,q,H,G,W,J,Q,Z,K,$,ee,te,re,ne,ie,oe,ae,se,le,ue,he,ce,fe,de,pe,ve,ge,ye,me,be=v,we=1<<g,Ee=we-1,Te=r-1,_e=0,Ce=4096,Ne=d+f+1,ke=r-Ne,Ae=1,Pe=15,Se=7,Oe=29,xe=256,Me=256,Ie=xe+1+Oe,Re=30,De=19,Le=16,Ye=17,Be=18,Ue=2*Ie+1,Xe=parseInt((g+f-1)/f),ze=null,je=function(){this.fc=0,this.dl=0},Ve=function(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0},Fe=function(e,t,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n},qe=function(){this.next=null,this.len=0,this.ptr=new Array(h),this.off=0},He=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0),Ge=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),We=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7),Je=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),Qe=new Array(new Fe(0,0,0,0),new Fe(4,4,8,4),new Fe(4,5,16,8),new Fe(4,6,32,32),new Fe(4,4,16,16),new Fe(8,16,32,32),new Fe(8,16,128,128),new Fe(8,32,128,256),new Fe(32,128,258,1024),new Fe(32,258,258,4096)),Ze=function(e){var t;if(e?e<1?e=1:e>9&&(e=9):e=a,V=e,w=!1,U=!1,null==ze){for(y=m=b=null,ze=new Array(h),C=new Array(c),N=new Array(be),k=new Array(l+u),A=new Array(1<<p),H=new Array(Ue),t=0;t<Ue;t++)H[t]=new je;for(G=new Array(2*Re+1),t=0;t<2*Re+1;t++)G[t]=new je;for(W=new Array(Ie+2),t=0;t<Ie+2;t++)W[t]=new je;for(J=new Array(Re),t=0;t<Re;t++)J[t]=new je;for(Q=new Array(2*De+1),t=0;t<2*De+1;t++)Q[t]=new je;Z=new Ve,K=new Ve,$=new Ve,ee=new Array(Pe+1),te=new Array(2*Ie+1),ie=new Array(2*Ie+1),oe=new Array(d-f+1),ae=new Array(512),se=new Array(Oe),le=new Array(Re),ue=new Array(parseInt(v/8))}},Ke=function(e){e.next=y,y=e},$e=function(){var e;return null!=y?(e=y,y=y.next):e=new qe,e.next=null,e.len=e.off=0,e},et=function(e){return A[r+e]},tt=function(e,t){return A[r+e]=t},rt=function(e){ze[T+E++]=e,T+E==h&&Rt()},nt=function(e){e&=65535,T+E<h-2?(ze[T+E++]=255&e,ze[T+E++]=e>>>8):(rt(255&e),rt(e>>>8))},it=function(){x=(x<<Xe^255&C[Y+f-1])&Ee,M=et(x),A[Y&Te]=M,tt(x,Y)},ot=function(e,t){xt(t[e].fc,t[e].dl)},at=function(e){return 255&(e<256?ae[e]:ae[256+(e>>7)])},st=function(e,t,r){return e[t].fc<e[r].fc||e[t].fc==e[r].fc&&ie[t]<=ie[r]},lt=function(e,t,r){var n;for(n=0;n<r&&me<ye.length;n++)e[t+n]=255&ye.charCodeAt(me++);return n},ut=function(){var e;for(e=0;e<we;e++)A[r+e]=0;if(j=Qe[V].max_lazy,F=Qe[V].good_length,s||(q=Qe[V].nice_length),z=Qe[V].max_chain,Y=0,O=0,X=lt(C,0,2*r),X<=0)return U=!0,void(X=0);for(U=!1;X<Ne&&!U;)ct();for(x=0,e=0;e<f-1;e++)x=(x<<Xe^255&C[e])&Ee},ht=function(e){var t,r,n=z,i=Y,o=L,a=Y>ke?Y-ke:_e,l=Y+d,u=C[i+o-1],h=C[i+o];L>=F&&(n>>=2);do if(t=e,C[t+o]==h&&C[t+o-1]==u&&C[t]==C[i]&&C[++t]==C[i+1]){i+=2,t++;do;while(C[++i]==C[++t]&&C[++i]==C[++t]&&C[++i]==C[++t]&&C[++i]==C[++t]&&C[++i]==C[++t]&&C[++i]==C[++t]&&C[++i]==C[++t]&&C[++i]==C[++t]&&i<l);if(r=d-(l-i),i=l-d,r>o){if(B=e,o=r,s){if(r>=d)break}else if(r>=q)break;u=C[i+o-1],h=C[i+o]}}while((e=A[e&Te])>a&&0!=--n);return o},ct=function(){var e,t,n=c-X-Y;if(n==-1)n--;else if(Y>=r+ke){for(e=0;e<r;e++)C[e]=C[e+r];for(B-=r,Y-=r,O-=r,e=0;e<we;e++)t=et(e),tt(e,t>=r?t-r:_e);for(e=0;e<r;e++)t=A[e],A[e]=t>=r?t-r:_e;n+=r}U||(e=lt(C,Y+X,n),e<=0?U=!0:X+=e)},ft=function(){for(;0!=X&&null==m;){var e;if(it(),M!=_e&&Y-M<=ke&&(D=ht(M),D>X&&(D=X)),D>=f)if(e=Pt(Y-B,D-f),X-=D,D<=j){D--;do Y++,it();while(0!=--D);Y++}else Y+=D,D=0,x=255&C[Y],x=(x<<Xe^255&C[Y+1])&Ee;else e=Pt(0,255&C[Y]),X--,Y++;for(e&&(At(0),O=Y);X<Ne&&!U;)ct()}},dt=function(){for(;0!=X&&null==m;){if(it(),L=D,I=B,D=f-1,M!=_e&&L<j&&Y-M<=ke&&(D=ht(M),D>X&&(D=X),D==f&&Y-B>Ce&&D--),L>=f&&D<=L){var e;e=Pt(Y-1-I,L-f),X-=L-1,L-=2;do Y++,it();while(0!=--L);R=0,D=f-1,Y++,e&&(At(0),O=Y)}else 0!=R?(Pt(0,255&C[Y-1])&&(At(0),O=Y),Y++,X--):(R=1,Y++,X--);for(;X<Ne&&!U;)ct()}},pt=function(){U||(P=0,S=0,yt(),ut(),m=null,E=0,T=0,R=0,V<=3?(L=f-1,D=0):(D=f-1,R=0,R=0),_=!1)},vt=function(e,t,r){var n;return w||(pt(),w=!0,0!=X)?(n=gt(e,t,r))==r?r:_?n:(V<=3?ft():dt(),0==X&&(0!=R&&Pt(0,255&C[Y-1]),At(1),_=!0),n+gt(e,n+t,r-n)):(_=!0,0)},gt=function(e,t,r){var n,i,o;for(n=0;null!=m&&n<r;){for(i=r-n,i>m.len&&(i=m.len),o=0;o<i;o++)e[t+n+o]=m.ptr[m.off+o];if(m.off+=i,m.len-=i,n+=i,0==m.len){var a;a=m,m=m.next,Ke(a)}}if(n==r)return n;if(T<E){for(i=r-n,i>E-T&&(i=E-T),o=0;o<i;o++)e[t+n+o]=ze[T+o];T+=i,n+=i,E==T&&(E=T=0)}return n},yt=function(){var e,t,r,n,i;if(0==J[0].dl){for(Z.dyn_tree=H,Z.static_tree=W,Z.extra_bits=He,Z.extra_base=xe+1,Z.elems=Ie,Z.max_length=Pe,Z.max_code=0,K.dyn_tree=G,K.static_tree=J,K.extra_bits=Ge,K.extra_base=0,K.elems=Re,K.max_length=Pe,K.max_code=0,$.dyn_tree=Q,$.static_tree=null,$.extra_bits=We,$.extra_base=0,$.elems=De,$.max_length=Se,$.max_code=0,r=0,n=0;n<Oe-1;n++)for(se[n]=r,e=0;e<1<<He[n];e++)oe[r++]=n;for(oe[r-1]=n,i=0,n=0;n<16;n++)for(le[n]=i,e=0;e<1<<Ge[n];e++)ae[i++]=n;for(i>>=7;n<Re;n++)for(le[n]=i<<7,e=0;e<1<<Ge[n]-7;e++)ae[256+i++]=n;for(t=0;t<=Pe;t++)ee[t]=0;for(e=0;e<=143;)W[e++].dl=8,ee[8]++;for(;e<=255;)W[e++].dl=9,ee[9]++;for(;e<=279;)W[e++].dl=7,ee[7]++;for(;e<=287;)W[e++].dl=8,ee[8]++;for(Et(W,Ie+1),e=0;e<Re;e++)J[e].dl=5,J[e].fc=Mt(e,5);mt()}},mt=function(){var e;for(e=0;e<Ie;e++)H[e].fc=0;for(e=0;e<Re;e++)G[e].fc=0;for(e=0;e<De;e++)Q[e].fc=0;H[Me].fc=1,ve=ge=0,he=ce=fe=0,de=0,pe=1},bt=function(e,t){for(var r=te[t],n=t<<1;n<=re&&(n<re&&st(e,te[n+1],te[n])&&n++,!st(e,r,te[n]));)te[t]=te[n],t=n,n<<=1;te[t]=r},wt=function(e){var t,r,n,i,o,a,s=e.dyn_tree,l=e.extra_bits,u=e.extra_base,h=e.max_code,c=e.max_length,f=e.static_tree,d=0;for(i=0;i<=Pe;i++)ee[i]=0;for(s[te[ne]].dl=0,t=ne+1;t<Ue;t++)r=te[t],i=s[s[r].dl].dl+1,i>c&&(i=c,d++),s[r].dl=i,r>h||(ee[i]++,o=0,r>=u&&(o=l[r-u]),a=s[r].fc,ve+=a*(i+o),null!=f&&(ge+=a*(f[r].dl+o)));if(0!=d){do{for(i=c-1;0==ee[i];)i--;ee[i]--,ee[i+1]+=2,ee[c]--,d-=2}while(d>0);for(i=c;0!=i;i--)for(r=ee[i];0!=r;)n=te[--t],n>h||(s[n].dl!=i&&(ve+=(i-s[n].dl)*s[n].fc,s[n].fc=i),r--)}},Et=function(e,t){var r,n,i=new Array(Pe+1),o=0;for(r=1;r<=Pe;r++)o=o+ee[r-1]<<1,i[r]=o;for(n=0;n<=t;n++){var a=e[n].dl;0!=a&&(e[n].fc=Mt(i[a]++,a))}},Tt=function(e){var t,r,n=e.dyn_tree,i=e.static_tree,o=e.elems,a=-1,s=o;for(re=0,ne=Ue,t=0;t<o;t++)0!=n[t].fc?(te[++re]=a=t,ie[t]=0):n[t].dl=0;for(;re<2;){var l=te[++re]=a<2?++a:0;n[l].fc=1,ie[l]=0,ve--,null!=i&&(ge-=i[l].dl)}for(e.max_code=a,t=re>>1;t>=1;t--)bt(n,t);do t=te[Ae],te[Ae]=te[re--],bt(n,Ae),r=te[Ae],te[--ne]=t,te[--ne]=r,n[s].fc=n[t].fc+n[r].fc,ie[t]>ie[r]+1?ie[s]=ie[t]:ie[s]=ie[r]+1,n[t].dl=n[r].dl=s,te[Ae]=s++,bt(n,Ae);while(re>=2);te[--ne]=te[Ae],wt(e),Et(n,a)},_t=function(e,t){var r,n,i=-1,o=e[0].dl,a=0,s=7,l=4;for(0==o&&(s=138,l=3),e[t+1].dl=65535,r=0;r<=t;r++)n=o,o=e[r+1].dl,++a<s&&n==o||(a<l?Q[n].fc+=a:0!=n?(n!=i&&Q[n].fc++,Q[Le].fc++):a<=10?Q[Ye].fc++:Q[Be].fc++,a=0,i=n,0==o?(s=138,l=3):n==o?(s=6,l=3):(s=7,l=4))},Ct=function(e,t){var r,n,i=-1,o=e[0].dl,a=0,s=7,l=4;for(0==o&&(s=138,l=3),r=0;r<=t;r++)if(n=o,o=e[r+1].dl,!(++a<s&&n==o)){if(a<l){do ot(n,Q);while(0!=--a)}else 0!=n?(n!=i&&(ot(n,Q),a--),ot(Le,Q),xt(a-3,2)):a<=10?(ot(Ye,Q),xt(a-3,3)):(ot(Be,Q),xt(a-11,7));a=0,i=n,0==o?(s=138,l=3):n==o?(s=6,l=3):(s=7,l=4)}},Nt=function(){var e;for(_t(H,Z.max_code),_t(G,K.max_code),Tt($),e=De-1;e>=3&&0==Q[Je[e]].dl;e--);return ve+=3*(e+1)+5+5+4,e},kt=function(e,t,r){var n;for(xt(e-257,5),xt(t-1,5),xt(r-4,4),n=0;n<r;n++)xt(Q[Je[n]].dl,3);Ct(H,e-1),Ct(G,t-1)},At=function(e){var t,r,a,s;if(s=Y-O,ue[fe]=de,Tt(Z),Tt(K),a=Nt(),t=ve+3+7>>3,r=ge+3+7>>3,r<=t&&(t=r),s+4<=t&&O>=0){var l;for(xt((n<<1)+e,3),It(),nt(s),nt(~s),l=0;l<s;l++)rt(C[O+l])}else r==t?(xt((i<<1)+e,3),St(W,J)):(xt((o<<1)+e,3),kt(Z.max_code+1,K.max_code+1,a+1),St(H,G));mt(),0!=e&&It()},Pt=function(e,t){if(k[he++]=t,0==e?H[t].fc++:(e--,H[oe[t]+xe+1].fc++,G[at(e)].fc++,N[ce++]=e,de|=pe),pe<<=1,0==(7&he)&&(ue[fe++]=de,de=0,pe=1),V>2&&0==(4095&he)){var r,n=8*he,i=Y-O;for(r=0;r<Re;r++)n+=G[r].fc*(5+Ge[r]);if(n>>=3,ce<parseInt(he/2)&&n<parseInt(i/2))return!0}return he==v-1||ce==be},St=function(e,t){var r,n,i,o,a=0,s=0,l=0,u=0;if(0!=he)do 0==(7&a)&&(u=ue[l++]),n=255&k[a++],0==(1&u)?ot(n,e):(i=oe[n],ot(i+xe+1,e),o=He[i],0!=o&&(n-=se[i],xt(n,o)),r=N[s++],i=at(r),ot(i,t),o=Ge[i],0!=o&&(r-=le[i],xt(r,o))),u>>=1;while(a<he);ot(Me,e)},Ot=16,xt=function(e,t){S>Ot-t?(P|=e<<S,nt(P),P=e>>Ot-S,S+=t-Ot):(P|=e<<S,S+=t)},Mt=function(e,t){var r=0;do r|=1&e,e>>=1,r<<=1;while(--t>0);return r>>1},It=function(){S>8?nt(P):S>0&&rt(P),P=0,S=0},Rt=function(){if(0!=E){var e,t;for(e=$e(),null==m?m=b=e:b=b.next=e,e.len=E-T,t=0;t<e.len;t++)e.ptr[t]=ze[T+t];E=T=0}},Dt=function(e,t){var r,n;ye=e,me=0,"undefined"==typeof t&&(t=a),Ze(t);for(var i=new Array(1024),o=[];(r=vt(i,0,i.length))>0;){var s=new Array(r);for(n=0;n<r;n++)s[n]=String.fromCharCode(i[n]);o[o.length]=s.join("")}return ye=null,o.join("")};t.default=Dt},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(16),o=n(i),a=function(){return!!(o.default.check({opera:"36"},!0,window.navigator.userAgent)||o.default.check({chrome:"46"},!0,window.navigator.userAgent)||o.default.check({firefox:"44"},!0,window.navigator.userAgent)||o.default.check({msedge:"11"},!0,window.navigator.userAgent))&&!(o.default.android||o.default.ios||o.default.windowsphone||o.default.chromeos)};t.default={isValidateBrowser:a}},function(e,t){"use strict";!function(t,r,n){e.exports=n()}(void 0,"bowser",function(){function e(e){function t(t){var r=e.match(t);return r&&r.length>1&&r[1]||""}function r(t){var r=e.match(t);return r&&r.length>1&&r[2]||""}function n(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var i,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),l=!s&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),h=!u&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),f=/silk/i.test(e),d=/sailfish/i.test(e),p=/tizen/i.test(e),v=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),m=!o&&!f&&/macintosh/i.test(e),b=!l&&!d&&!p&&!v&&/linux/i.test(e),w=t(/edge\/(\d+(\.\d+)?)/i),E=t(/version\/(\d+(\.\d+)?)/i),T=/tablet/i.test(e),_=!T&&/[^-]mobi/i.test(e),C=/xbox/i.test(e);/opera/i.test(e)?i={name:"Opera",opera:a,version:E||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?i={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||E}:/SamsungBrowser/i.test(e)?i={name:"Samsung Internet for Android",samsungBrowser:a,version:E||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:a,version:E||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:a,version:E||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",windowsphone:a},w?(i.msedge=a,i.version=w):(i.msie=a,i.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:a,version:w}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||E}:d?i={name:"Sailfish",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=a)):f?i={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:a,version:E||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:v?(i={name:"WebOS",webos:a,version:E||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=a)):/bada/i.test(e)?i={name:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||E}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||E}:/chromium/i.test(e)?i={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||E}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?i={name:"Android",version:E}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:a},E&&(i.version=E)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},E&&(i.version=E)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||E}:{name:t(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=a):(i.name=i.name||"Webkit",i.webkit=a),!i.version&&E&&(i.version=E)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=a,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||i.msedge||!l&&!i.silk?i.windowsphone||i.msedge||!o?m?i.mac=a:C?i.xbox=a:y?i.windows=a:b&&(i.linux=a):(i[o]=a,i.ios=a):i.android=a;var N="";i.windows?N=n(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?N=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?(N=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),N=N.replace(/[_\s]/g,".")):o?(N=t(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):l?N=t(/android[ \/-](\d+(\.\d+)*)/i):i.webos?N=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?N=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?N=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(N=t(/tizen[\/\s](\d+(\.\d+)*)/i)),N&&(i.osversion=N);var k=!i.windows&&N.split(".")[0];return T||h||"ipad"==o||l&&(3==k||k>=4&&!_)||i.silk?i.tablet=a:(_||"iphone"==o||"ipod"==o||l||u||i.blackberry||i.webos||i.bada)&&(i.mobile=a),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=a:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=a:i.x=a,i}function t(e){return e.split(".").length}function r(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),i=r(e,function(e){var i=n-t(e);return e+=new Array(i+1).join(".0"),r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(i[0][n]>i[1][n])return 1;if(i[0][n]!==i[1][n])return-1;if(0===n)return 0}}function i(t,r,i){var o=s;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(o=e(i));var a=""+o.version;for(var l in t)if(t.hasOwnProperty(l)&&o[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return n([a,t[l]])<0}return r}function o(e,t,r){return!i(e,t,r)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=n,s.check=o,s._detect=e,s})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(10),u=n(l),h=r(2),c=n(h),f=r(18),d=n(f),p={fadeOut:function(e,t){var r=1,n=setInterval(function(){r<=.1&&(clearInterval(n),e.style.display="none",t()),e.style.opacity=r,e.style.filter="alpha(opacity="+100*r+")",r-=.1*r},50)},fadeIn:function(e,t){var r=.1;e.style.display="block";var n=setInterval(function(){r>=1&&(clearInterval(n),t()),e.style.opacity=r,e.style.filter="alpha(opacity="+100*r+")",r+=.1*r},10)}},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.target&&r.setTarget(e.target),r.movie=null,r.currentFrame=null,r.displayer=null,r.isPlaying=!1,r.progress=0,r.speed=1,r.timerId=null,r.initCursor(),r.on("play",function(){r.isPlaying=!0}),r.on("stop",function(){r.isPlaying=!1,r.currentFrame=null,clearTimeout(r.timerId),r.progress=0}),r.on("playing",function(e){}),r.on("pause",function(){r.isPlaying=!1}),r.on("continue",function(){r.isPlaying=!0}),r.on("progress",function(e){}),r}return a(t,e),s(t,[{key:"setMovie",value:function(e){if(!(e instanceof c.default))throw new Error("Target is not an instance of HTMLElement");return this.movie=e,this}},{key:"resetCurrentFrame",value:function(e){this.stop();for(var t=this.target;t.firstChild;)t.removeChild(t.firstChild);this.displayer||(this.displayer=document.createElement("iframe"),this.tryGetTarget().appendChild(this.displayer),this.displayer.style="margin-left: 0px; display: none;",this.displayer.sandbox="allow-forms allow-scripts allow-same-origin",this.displayer.width="1676",this.displayer.height="886",this.displayer["data-origwidth"]="1676",this.displayer["data-origheight"]="886",this.displayer.scrolling="no");for(var r=this.displayer.contentWindow.document;r.firstChild;)r.removeChild(r.firstChild);this.target=r;var n=this;this.mirror=new d.default(this.displayer.contentWindow.document,{createElement:function(e){if("SCRIPT"==e){var t=document.createElement("NO-SCRIPT");return t.style.display="none",t}if("HEAD"==e){var t=document.createElement("HEAD");return t.appendChild(document.createElement("BASE")),t.firstChild.href=n.movie.base,t}}});var i=this.tryGetMovie();return this.mirror.initialize(i.getRootId(),i.getChildren()),this.target.body.appendChild(this.cursor),this.playFastTo(i.frames[0],e),this.displayer.style="margin-left: 0px; display: block;",this}},{key:"getFrameByProgress",value:function(e){var t=this.tryGetMovie();return e>=1?t.frames[t.frames.length-1]:t.frames[Math.ceil(t.frames.length*e)-1]}},{key:"setSpeed",value:function(e){return this.speed=e,this}},{key:"play",value:function(){if(this.isPlaying)return this;var e=this.tryGetMovie();this.target.body.appendChild(this.cursor);var t=e.frames;return this.emit("play"),t.length?this.playFrom(t[0]):this.stop(),this}},{key:"stop",value:function(){return this.emit("stop"),this}},{key:"continue",value:function(){if(this.isPlaying)return this;var e=(this.tryGetMovie(),this.movie.frames);return this.emit("continue"),e.length?this.playFrom(this.currentFrame):this.stop(),this}},{key:"pause",value:function(){return this.emit("pause"),this}},{key:"getCursor",value:function(){return this.cursor}},{key:"getCursorX",value:function(e){var t=e||this.currentFrame,r=this.tryGetTarget(),n=this.tryGetMovie().left,i=0===n?t.scrollX:r.scrollLeft,o=t.cursorX-n+i;return o}},{key:"getCursorY",value:function(e){var t=e||this.currentFrame,r=this.tryGetTarget(),n=this.tryGetMovie().top,i=0===n?t.scrollY:r.scrollTop,o=t.cursorY-n+i;return o}},{key:"tryGetMovie",value:function(){var e=this.movie;if(!e)throw new Error("Movie not found");return e}},{key:"refreshScene",value:function(){var e=this.displayer.contentWindow.document;e.body.innerHTML=this.movie.getDecodedScene()}},{key:"initCursor",value:function(){var e=document.createElement("div");return e.id="cursor",e.style.position="absolute",e.style.zIndex="9999",e.style.width="11px",e.style.height="18px",e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 934' style='height:100%;width:100%'><path d='M0 0l512 510.2 -201.8 32.9L480.4 852.1l-153.9 81.9L154.2 622.1 0 776.3V0z' style='fill:#000;stroke-width:3em;stroke:#fff;'/></svg>",this.cursor=e,this.cursor}},{key:"initPlayer",value:function(e){this.movie=e;for(var t=this.tryGetTarget();t.firstChild;)t.removeChild(t.firstChild);t.style.position="relative",this.displayer||(this.displayer=document.createElement("iframe"),this.tryGetTarget().appendChild(this.displayer),this.displayer.style="margin-left: 0px; display: block; ::-webkit-scrollbar { display:none }",this.displayer.sandbox="allow-forms allow-scripts allow-same-origin",this.displayer.width="100%",this.displayer.height="886",this.displayer["data-origwidth"]="100%",this.displayer["data-origheight"]="886",this.displayer.scrolling="no");for(var r=this.displayer.contentWindow.document;r.firstChild;)r.removeChild(r.firstChild);this.target=r;var n=this;return this.mirror=new d.default(this.displayer.contentWindow.document,{createElement:function(e){if("SCRIPT"==e){var t=document.createElement("NO-SCRIPT");return t.style.display="none",t}if("HEAD"==e){var t=document.createElement("HEAD");return t.appendChild(document.createElement("BASE")),t.firstChild.href=n.movie.base,t}}}),this.mirror.initialize(e.getRootId(),e.getChildren()),this.displayer}},{key:"playFrom",value:function(e){var t=this;if(this.isPlaying){var r=this.tryGetMovie(),n=r.frames.indexOf(e),i=r.frames[n+1],o=e.eventType,a=this.onEvents[o]||this.abstractOnEvent;if(this.emit("progress",{progress:n}),this.currentFrame=e,this.emit("playing",e),this.emit(e.eventType,e),a(this,e),i){var s=i.ts-e.ts;this.timerId=setTimeout(function(){t.playFrom(i)},s/this.speed)}else this.stop()}}},{key:"playFastTo",value:function(e,t){if(e.ts!==t.ts){var r=this.tryGetMovie(),n=r.frames.indexOf(e),i=r.frames[n+1],o=e.eventType,a=this.onEvents[o]||this.abstractOnEvent;this.currentFrame=e,this.emit(e.eventType,e),a(this,e),i?this.playFastTo(i,t):console.error("dragged to unkown frame")}else this.currentFrame=e}},{key:"abstractOnEvent",value:function(e,t){var r=e.target.body,n=e.movie,i="px",o=0===n.top?t.scrollY:r.scrollTop,a=0===n.left?t.scrollX:r.scrollLeft;"scroll"===t.eventType&&(r.scrollTop=t.scrollY,r.scrollLeft=t.scrollX),t.width&&(r.style.width=t.width+i,e.displayer.style.width=t.width+i),t.height&&(r.style.height=t.height+"px",e.displayer.style.height=t.height+i);var s=t.cursorX-n.left+a,l=t.cursorY-n.top+o;e.cursor.style.left=s+i,e.cursor.style.top=l+i}},{key:"onEvents",value:function(){var e=this;return{click:function(e,t){var r=e.target.body,n=0===e.movie.top?t.scrollY:r.scrollTop,i=0===e.movie.left?t.scrollX:r.scrollLeft,o=document.createElement("div");o.className="dotClick";var a=t.cursorX-e.movie.left+i,s=t.cursorY-e.movie.top+n;o.style.backgroundColor="#f04242",o.style.width="10px",o.style.height="10px",o.style.borderRadius="100%",o.style.boxShadow="0 0 3px #d92b2b",o.style.marginLeft="-5px",o.style.marginTop="-5px",o.style.position="absolute",o.style.left=a+"px",o.style.top=s+"px",o.style.zIndex="9998",r.appendChild(o),setTimeout(function(){p.fadeOut(o,function(){return r.removeChild(o)})},2e3)},mutation:function(e,t){var r=t.changed,n=e.mirror;try{n.applyChanged.apply(n,r)}catch(e){}},scroll:function(t,r){var n=t.target.body,i=t.movie,o="px",a=0===i.top?r.scrollY:n.scrollTop,s=0===i.left?r.scrollX:n.scrollLeft;"scroll"===r.eventType&&(n.scrollTop=r.scrollY,n.scrollLeft=r.scrollX);var l=r.cursorX-i.left+s,u=r.cursorY-i.top+a;if(t.cursor.style.left=l+o,t.cursor.style.top=u+o,r.element){var h=e.mirror.deserializeNode(r.element);h.scrollTop=r.elementScrollY,h.scrollLeft=r.elementScrollX}},keyup:function(t,r){t.target.body,t.movie;if(r.element){var n=e.mirror.deserializeNode(r.element);"TEXTAREA"==n.tagName?n.innerHTML=r.elementTextValue:n.setAttribute("value",r.elementTextValue)}},mousemove:function(e,t){var r=e.target.body,n=e.movie,i="px",o=0===n.top?t.scrollY:r.scrollTop,a=0===n.left?t.scrollX:r.scrollLeft,s=t.cursorX-n.left+a,l=t.cursorY-n.top+o;e.cursor.style.left=s+i,e.cursor.style.top=l+i},change:function(t,r){var n=(t.target.body,t.movie,r.element);if(n){var i=e.mirror.deserializeNode(r.element);"SELECT"==inputElement.tagName?i.selectedIndex=parseInt(elementTextValue,10):"INPUT"==i.tagName&&"radio"==i.type?i.checked=!0:"INPUT"==i.tagName&&"checkbox"==i.type&&(i.checked=r.elementTextValue)}}}}}]),t}(u.default);t.default=v},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this.root=t,this.delegate=n,this.idMap={}}return n(e,[{key:"initialize",value:function(e,t){this.idMap[e]=this.root;for(var r=0;r<t.length;r++)this.deserializeNode(t[r],this.root)}},{key:"applyChanged",value:function(e,t,r,n){var i=this;t.forEach(function(e){try{var t=i.deserializeNode(e);i.deserializeNode(e.parentNode),i.deserializeNode(e.previousSibling),t.parentNode&&t.parentNode.removeChild(t)}catch(e){}}),e.forEach(function(e){try{var t=i.deserializeNode(e);t.parentNode&&t.parentNode.removeChild(t)}catch(e){}}),t.forEach(function(e){try{var t=i.deserializeNode(e),r=i.deserializeNode(e.parentNode),n=i.deserializeNode(e.previousSibling);r.insertBefore(t,n?n.nextSibling:r.firstChild)}catch(e){}}),r.forEach(function(e){try{var t=i.deserializeNode(e);Object.keys(e.attributes).forEach(function(r){var n=e.attributes[r];if(null===n)t.removeAttribute(r);else if(!i.delegate||!i.delegate.setAttribute||!i.delegate.setAttribute(t,r,n))try{t.setAttribute(r,n)}catch(e){}})}catch(e){}}),n.forEach(function(e){try{var t=i.deserializeNode(e);t.textContent=e.textContent}catch(e){}}),e.forEach(function(e){try{delete i.idMap[e.id]}catch(e){}})}},{key:"deserializeNode",value:function(e,t){var r=this;if(null===e)return null;var n=this.idMap[e.id];if(n)return n;var i=this.root.ownerDocument;null===i&&(i=this.root);try{switch(e.nodeType){case Node.COMMENT_NODE:n=i.createComment(e.textContent);break;case Node.TEXT_NODE:n=i.createTextNode(e.textContent);break;case Node.DOCUMENT_TYPE_NODE:n=i.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Node.ELEMENT_NODE:this.delegate&&this.delegate.createElement&&(n=this.delegate.createElement(e.tagName)),n||(n=i.createElement(e.tagName)),Object.keys(e.attributes).forEach(function(t){r.delegate&&r.delegate.setAttribute&&r.delegate.setAttribute(n,t,e.attributes[t])||n.setAttribute(t,e.attributes[t])})}}catch(e){}if(!n)return null;if(this.idMap[e.id]=n,t&&t.appendChild(n),e.childNodes)for(var o=0;o<e.childNodes.length;o++)this.deserializeNode(e.childNodes[o],n);return n}}]),e}();t.default=i}]);